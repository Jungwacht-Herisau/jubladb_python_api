# DO NOT EDIT THIS FILE, it is auto-generated!
import jubladb_api.core.metamodel_classes
import jubladb_api.core.base_entity
import keys

import datetime


# @formatter:off


class Invoice(jubladb_api.core.base_entity.BaseEntity):
    def __init__(
        self,
        id_: int,
        title: str,
        description: str,
        state: str,
        group_id: int,
        recipient_id: int,
        due_at: datetime.date,
        issued_at: datetime.date,
        recipient_email: str,
        payment_information: str,
        payment_purpose: str,
        hide_total: bool,
        group: keys.GroupKey,
        recipient: keys.PersonKey,
        invoice_items: list[keys.InvoiceItemKey],
    ):
        super().__init__(id_)

        self._title = title
        self._description = description
        self._state = state
        self._group_id = group_id
        self._recipient_id = recipient_id
        self._due_at = due_at
        self._issued_at = issued_at
        self._recipient_email = recipient_email
        self._payment_information = payment_information
        self._payment_purpose = payment_purpose
        self._hide_total = hide_total

        self._group = group
        self._recipient = recipient
        self._invoice_items = invoice_items

    @property
    def title(self) -> str:
        return self._title

    @property
    def description(self) -> str:
        return self._description

    @property
    def state(self) -> str:
        return self._state

    @property
    def group_id(self) -> int:
        return self._group_id

    @property
    def recipient_id(self) -> int:
        return self._recipient_id

    @property
    def due_at(self) -> datetime.date:
        return self._due_at

    @property
    def issued_at(self) -> datetime.date:
        return self._issued_at

    @property
    def recipient_email(self) -> str:
        return self._recipient_email

    @property
    def payment_information(self) -> str:
        return self._payment_information

    @property
    def payment_purpose(self) -> str:
        return self._payment_purpose

    @property
    def hide_total(self) -> bool:
        return self._hide_total

    @property
    def group(self) -> keys.GroupKey:
        return self._group

    @property
    def recipient(self) -> keys.PersonKey:
        return self._recipient

    @property
    def invoice_items(self) -> list[keys.InvoiceItemKey]:
        return self._invoice_items

    @property
    def key(self) -> keys.InvoiceKey:
        return keys.InvoiceKey(self._id)

    @property
    def meta(self) -> jubladb_api.core.metamodel_classes.Entity:
        return jubladb_api.generated.metamodel.ENTITIES["invoice"]

    @classmethod
    def from_json(cls, json_data: dict):
        if json_data.get("type", None) != "invoices":
            raise ValueError("Invalid data type")
        return cls(
            id_=int(json_data["id"]),
            title=json_data["attributes"]["title"],
            description=json_data["attributes"]["description"],
            state=json_data["attributes"]["state"],
            group_id=json_data["attributes"]["group_id"],
            recipient_id=json_data["attributes"]["recipient_id"],
            due_at=json_data["attributes"]["due_at"],
            issued_at=json_data["attributes"]["issued_at"],
            recipient_email=json_data["attributes"]["recipient_email"],
            payment_information=json_data["attributes"]["payment_information"],
            payment_purpose=json_data["attributes"]["payment_purpose"],
            hide_total=json_data["attributes"]["hide_total"],
            group=keys.GroupKey(
                cls._access_json_single_relation_id(json_data, "group", "groups")
            ),
            recipient=keys.PersonKey(
                cls._access_json_single_relation_id(json_data, "recipient", "people")
            ),
            invoice_items=[
                keys.InvoiceItemKey(id_)
                for id_ in cls._access_json_many_relation_ids(
                    json_data, "invoice_items", "invoice_items"
                )
            ],
        )


# @formatter:on
